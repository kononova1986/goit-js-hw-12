{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function onSearch(searchValue, page, per_page) {\n  const searchParam = new URLSearchParams({\n    key: '43777991-fc34414997ff3024de4420c7b',\n    image_type: 'photo',\n    q: searchValue,\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: per_page,\n    \n  });\n  const response = await axios(`?${searchParam}`);\n  return response.data;\n}\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nconst list = document.querySelector('.list');\n\n    let lightbox = new SimpleLightbox('.gallery-item a', {\n      captionDelay: 250,\n      captionPosition: 'bottom',\n      captionsData: 'alt',\n    });\n\n\nexport function render(photos) {\n    const markup = photos.hits.map((photo) => {\n      return `<li class=\"gallery-item\" >\n    <a href= ${photo.largeImageURL}>\n\t<img\n\t\t\tclass = \"gallery-image\"  \n\t\t\tsrc = \"${photo.webformatURL}\"  \n\t\t\talt = \"${photo.tags}\"\n    />\n\t</a>\n    <ul class = \"gallery-alt\">\n        <li class=\"gallery-alt-photo\">Likes <p class = 'like'>${photo.likes}</p></li>\n        <li class=\"gallery-alt-photo\">Views <p class = 'like'>${photo.views}</p></li>\n        <li class=\"gallery-alt-photo\">Comments <p class = 'like'>${photo.comments}</p></li>\n        <li class=\"gallery-alt-photo\">Downloads <p class = 'like'>${photo.downloads}</p></li>\n    </ul>\n</li>`\n    }).join('');\n  list.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n}\n\n  export const displayErrorMessage = () => {\n    iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        icon: '',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        progressBarColor: '#B51B1B',\n        messageColor: 'white',\n        close: false,\n        timeout: 2000,\n    });\n};\n  export const displayEndResultsMessage = () => {\n    iziToast.error({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        icon: '',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        progressBarColor: '#B51B1B',\n        messageColor: 'white',\n        close: false,\n        timeout: 2000,\n    });\n};\n\nexport const displayMessageInput = () => {\n    iziToast.error({\n        message: \"Fill in the search field.Please try again!\",\n        icon: '',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        progressBarColor: '#B51B1B',\n        messageColor: 'white',\n        close: false,\n        timeout: 2000,\n    });\n};\n","import { onSearch } from './js/pixabay-api';\nimport { render, displayErrorMessage, displayEndResultsMessage, displayMessageInput} from \"./js/render-functions\";\n\nconst inputElement = document.querySelector('.input');\nconst form = document.querySelector('.form');\nconst list = document.querySelector('.list');\nconst btnMore = document.querySelector('.btn-more');\nconst loader = document.querySelector('.loader');\n\nloader.style.display = 'none';\n\ninputElement.addEventListener('input', (event) => {\n    event.target.style.border = '1px solid #4E75FF';\n});\ninputElement.addEventListener('blur', (event) => {\n    event.target.style.border = '1px solid #808080';\n});\n\nlet page = 1;\nlet per_page = 15;\nlet searchQuery = \"\";\nlet totalPages = 0;\n\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    list.innerHTML = '';\n    \n    loader.style.display = 'block';\n    btnMore.style.display = 'none';\n    page = 1;\n\n    searchQuery = inputElement.value.trim();\n\nif (searchQuery ===\"\") {\n    displayMessageInput();\n    loader.style.display = 'none';\n    return;\n    }\n    try {\n        const photo = await onSearch(searchQuery, page, per_page);\n    if ( photo.totalHits === 0) {\n        displayErrorMessage();\n        btnMore.style.display = 'none';\n        return;\n    } else {\n        render(photo);\n        inputElement.value = \"\";\n        btnMore.style.display = 'block';\n        \n        if (photo.totalHits < per_page) {\n        displayEndResultsMessage()\n        btnMore.style.display = 'none';\n        } \n        }\n        console.log(\"ðŸš€ ~ form.addEventListener ~ photo:\", photo)\n    } catch (error) {\n        console.error(error);\n    }\n    finally {\n        loader.style.display = 'none';\n    }\n});\n\nconst smoothScrollOnLoadMore = () => {\nconst elem = document.querySelector('.list');\nlet rect = elem.getBoundingClientRect().height;\nconst scrollHeight = rect * 2;\n\nwindow.scrollBy({\n    top: scrollHeight,\n    left: 0,\n    behavior: 'smooth',\n});\n};\n\nbtnMore.addEventListener('click', async (event) => {\n    page +=1;\n    try {\n        const photoMore = await onSearch(searchQuery, page, per_page);\n        render(photoMore);\n        smoothScrollOnLoadMore();\n        totalPages = Math.ceil(photoMore.totalHits / per_page);\n    if (page === totalPages) {\n    btnMore.style.display = 'none';\n        } \n} catch (error) {\n    console.log(error);\n    }\n});\n\n\n\n"],"names":["axios","onSearch","searchValue","page","per_page","searchParam","list","lightbox","SimpleLightbox","render","photos","markup","photo","displayErrorMessage","iziToast","displayEndResultsMessage","displayMessageInput","inputElement","form","btnMore","loader","event","searchQuery","totalPages","error","smoothScrollOnLoadMore","scrollHeight","photoMore"],"mappings":"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"}