{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport let per_page = 3;\nexport let page = 1;\nexport let totalPages = 0;\n\nexport async function onSearch(searchValue,page) {\n  const searchParam = new URLSearchParams({\n    key: '43777991-fc34414997ff3024de4420c7b',\n    image_type: 'photo',\n    q: searchValue,\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: per_page,\n    \n  });\n  const response = await axios(`?${searchParam}`);\n  return response.data;\n}\n\n  \n\nexport async function onSearchMore(searchValue, page) {\n  page = +1;\n  console.log(\"ðŸš€ ~ onSearchMore ~ page:\", page)\n  const results = await onSearch(searchValue, page);\n  page = +1; \n  try {\n    const { totalHits, hits } = results;\n    totalPages = Math.ceil(totalHits / per_page);\n    return { hits, totalPages };\n  } catch (error) {\n    console.error(error);\n  }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nconst list = document.querySelector('.list');\n\n    let lightbox = new SimpleLightbox('.gallery-item a', {\n      captionDelay: 250,\n      captionPosition: 'bottom',\n      captionsData: 'alt',\n    });\n\nexport function render(photos) {\n    const markup = photos.hits.map((photo) => {\n      return `<li class=\"gallery-item\" >\n    <a href= ${photo.largeImageURL}>\n\t<img\n\t\t\tclass = \"gallery-image\"  \n\t\t\tsrc = \"${photo.webformatURL}\"  \n\t\t\talt = \"${photo.tags}\"\n    />\n\t</a>\n    <ul class = \"gallery-alt\">\n        <li class=\"gallery-alt-photo\">Likes <p class = 'like'>${photo.likes}</p></li>\n        <li class=\"gallery-alt-photo\">Views <p class = 'like'>${photo.views}</p></li>\n        <li class=\"gallery-alt-photo\">Comments <p class = 'like'>${photo.comments}</p></li>\n        <li class=\"gallery-alt-photo\">Downloads <p class = 'like'>${photo.downloads}</p></li>\n    </ul>\n</li>`\n    }).join('');\n  list.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n}\n  export const displayErrorMessage = () => {\n    iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        icon: '',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        progressBarColor: '#B51B1B',\n        messageColor: 'white',\n        close: false,\n        timeout: 2000,\n    });\n};","\nimport { onSearch, onSearchMore, page } from './js/pixabay-api';\nimport { render, displayErrorMessage } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst form = document.querySelector('.form');\nconst list = document.querySelector('.list');\nconst btnMore = document.querySelector('.btn-more');\nconst loader = document.querySelector('.loader');\nloader.style.display = 'none';\nconst inputElement = document.querySelector('.input');\ninputElement.addEventListener('input', (event) => {\n    event.target.style.border = '1px solid #4E75FF';\n});\n\ninputElement.addEventListener('blur', (event) => {\n    event.target.style.border = '1px solid #808080';\n});\ninputElement.addEventListener('input', (event) => {\ninputElement.value = event.target.value;\n})\n\n\nform.addEventListener('submit', async (event) => {\n    list.innerHTML = '';\n    loader.style.display = 'block';\n    event.preventDefault();\n    const photo = await onSearch(inputElement.value, page);\n    console.log(\"ðŸš€ ~ form.addEventListener ~ photo:\", photo);\n    try {\n    if (inputElement.value.trim() === '' || photo.totalHits === 0) {\n        displayErrorMessage();\n        loader.style.display = 'none';\n        btnMore.style.display = 'none';\n    } else {\n        render(photo);\n            btnMore.style.display = 'block';\n            loader.style.display = 'none';\n        }\n    } catch (error) {\n        console.error(error);\n    }\n});\n\n\nbtnMore.addEventListener('click', async (event) => {\n  event.preventDefault();\n  const photoMore = await onSearchMore(inputElement.value, page);\n  console.log(\"ðŸš€ ~ btnMore.addEventListener ~ page_first:\", page)\n  console.log(\"ðŸš€ ~ btnMore.addEventListener ~ photoMore:\", photoMore)\n    try {\n        render(photoMore);\n    if (photoMore.hits.length >= photoMore.totalPages) {\n      iziToast.error({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          icon: '',\n          backgroundColor: '#EF4040'\n      });\n      btnMore.style.display = 'none';\n        } \n  } catch (error) {\n    console.log(error);\n  }\n});\n\n\n"],"names":["axios","per_page","page","totalPages","onSearch","searchValue","searchParam","onSearchMore","results","totalHits","hits","error","list","lightbox","SimpleLightbox","render","photos","markup","photo","displayErrorMessage","iziToast","form","btnMore","loader","inputElement","event","photoMore"],"mappings":"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"}